<!DOCTYPE html>
<html>
<head>
  <title>Fastest Store Finder</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    input, select, button { padding: 8px; margin: 5px 0; width: 100%; max-width: 400px; }
    #results { margin-top: 20px; }
  </style>
</head>
<body>

<h1>Find the Fastest Store</h1>

<label>Your Location:</label>
<input id="locationInput" placeholder="Your current location will be auto-filled" disabled>

<label>Destination Stores:</label>
<input id="storeInput" placeholder="Type store/street name">

<label>Transportation Method:</label>
<select id="mode">
  <option value="driving">Driving</option>
  <option value="walking">Walking</option>
</select>

<button id="calculateBtn">Calculate Fastest</button>

<div id="results"></div>

<!-- Load Google Maps JS API -->
<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places"></script>
<script>
let myLocation = null;
let autocomplete;

function initAutocomplete() {
  const storeInput = document.getElementById('storeInput');
  autocomplete = new google.maps.places.Autocomplete(storeInput);
  autocomplete.setFields(['geometry', 'name']);
}

// Get user's current location
if (navigator.geolocation) {
  navigator.geolocation.getCurrentPosition((position) => {
    myLocation = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
    document.getElementById('locationInput').value = `${position.coords.latitude}, ${position.coords.longitude}`;
  }, () => {
    alert('Geolocation permission denied.');
  });
} else {
  alert('Geolocation not supported by this browser.');
}

// Calculate travel time
document.getElementById('calculateBtn').addEventListener('click', () => {
  const destinationPlace = autocomplete.getPlace();
  if (!destinationPlace || !destinationPlace.geometry) {
    alert('Please select a valid store from the dropdown.');
    return;
  }

  const mode = document.getElementById('mode').value;

  const service = new google.maps.DistanceMatrixService();
  service.getDistanceMatrix({
    origins: [myLocation],
    destinations: [destinationPlace.geometry.location],
    travelMode: mode.toUpperCase(),
  }, (response, status) => {
    if (status !== 'OK') {
      alert('Error calculating distance: ' + status);
    } else {
      const result = response.rows[0].elements[0];
      const output = `
        <h2>Result:</h2>
        <p>Destination: ${destinationPlace.name}</p>
        <p>Distance: ${result.distance.text}</p>
        <p>Estimated Time: ${result.duration.text}</p>
      `;
      document.getElementById('results').innerHTML = output;
    }
  });
});

window.onload = initAutocomplete;
</script>

</body>
</html>
